<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploying Applications &mdash; silverback  documentation</title>
      <link rel="stylesheet" href="/silverback/latest/_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="/silverback/latest/_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="/silverback/latest/_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="/silverback/userguides/platform.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script data-domain="docs.apeworx.io" defer="defer" src="https://plausible.io/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/custom.js"></script>
  <script>
      var PROJECT = "silverback";
  </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Local Development" href="../commands/run.html" />
    <link rel="prev" title="Developing Applications" href="development.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            silverback
              <img src="../_static/logo.gif" class="logo" alt="Logo"/>
          </a>

          <div class="version">
            <label for="version-picker" id="version-picker-label">Version:</label>
            <select id="version-picker">
              <option value="">Select version...</option>
              <option value="latest">latest</option>
              <option value="stable">stable</option>
                <option value="v0.5.8">v0.5.8</option>
                <option value="v0.5.7">v0.5.7</option>
                <option value="v0.5.6">v0.5.6</option>
                <option value="v0.5.5">v0.5.5</option>
                <option value="v0.5.4">v0.5.4</option>
                <option value="v0.5.3">v0.5.3</option>
                <option value="v0.5.2">v0.5.2</option>
                <option value="v0.5.1">v0.5.1</option>
                <option value="v0.5.0">v0.5.0</option>
                <option value="v0.4.2">v0.4.2</option>
                <option value="v0.4.1">v0.4.1</option>
                <option value="v0.4.0">v0.4.0</option>
                <option value="v0.3.3">v0.3.3</option>
                <option value="v0.3.2">v0.3.2</option>
                <option value="v0.3.1">v0.3.1</option>
                <option value="v0.3.0">v0.3.0</option>
                <option value="v0.2.1">v0.2.1</option>
                <option value="v0.2.0">v0.2.0</option>
                <option value="v0.1.1">v0.1.1</option>
                <option value="v0.1.0">v0.1.0</option>
            </select>
          </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Developing Applications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploying Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-cluster">Creating a Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-your-cluster">Connecting to your Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-your-bot">Building your Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-environment-variables">Adding Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-your-bot">Deploying your Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring-your-bot">Monitoring your Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controlling-your-bot">Controlling your Bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#viewing-measured-metrics">Viewing Measured Metrics</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLI Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../commands/run.html">Local Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/cluster.html">Cloud Platform</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/application.html">silverback.application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/runner.html">silverback.runner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/middlewares.html">silverback.middlewares</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/subscriptions.html">silverback.subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/exceptions.html">silverback.exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/utils.html">silverback.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">silverback</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Deploying Applications</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/userguides/platform.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deploying-applications">
<h1>Deploying Applications<a class="headerlink" href="#deploying-applications" title="Permalink to this heading"></a></h1>
<p>In this guide, we are going to show you more details on how to deploy your application to the <a class="reference external" href="https://silverback.apeworx.io">Silverback Platform</a>.</p>
<section id="creating-a-cluster">
<h2>Creating a Cluster<a class="headerlink" href="#creating-a-cluster" title="Permalink to this heading"></a></h2>
<p>The Silverback Platform runs your Applications (or “Bots”) on dedicated managed application Clusters.
These Clusters will take care to orchestrate infrastructure, monitor, run your triggers, and collect metrics for your applications.
Each Cluster is bespoke for an individual or organization, and isolates your applications from others on different infrastructure.</p>
<p>Before we deploy our Application, we have to create a Cluster.
If you haven’t yet, please sign up for Silverback at <a class="reference external" href="https://silverback.apeworx.io">https://silverback.apeworx.io</a>.</p>
<p>Once you have signed up, you can actually create (and pay for) your Clusters from the Silverback CLI utility by first
logging in to the Platform using <a class="reference external" href="../commands/cluster.html#silverback-login"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">login</span></code></a>,
and then using <a class="reference external" href="../commands/cluster.html#silverback-cluster-new"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">new</span></code></a> to follow the steps necessary to deploy it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Platform UI will let you create and manage Clusters using a graphical experience, which may be preferred.
The CLI experience is for those working locally who don’t want to visit the website, or are locally developing their applications.</p>
</div>
</section>
<section id="connecting-to-your-cluster">
<h2>Connecting to your Cluster<a class="headerlink" href="#connecting-to-your-cluster" title="Permalink to this heading"></a></h2>
<p>To connect to a cluster, you can use commands from the <a class="reference external" href="../commands/cluster.html#silverback-cluster"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span></code></a> subcommand group.
For instance, to list all your available bots on your cluster, use <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-list"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">list</span></code></a>.
To obtain general information about your cluster, just use <a class="reference external" href="../commands/cluster.html#silverback-cluster-info"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">info</span></code></a>,
or <a class="reference external" href="../commands/cluster.html#silverback-cluster-health"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">health</span></code></a> to see the current status of your Cluster.</p>
<p>If you have no bots, we will first have to containerize our Applications and upload them to a container registry that our Cluster is configured to access.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Building a container for your application can be an advanced topic, we have included the <code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">build</span></code> subcommand to help assist in generating Dockerfiles.</p>
</div>
</section>
<section id="building-your-bot">
<h2>Building your Bot<a class="headerlink" href="#building-your-bot" title="Permalink to this heading"></a></h2>
<p>TODO: Add build process and describe <code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">build</span> <span class="pre">--autogen</span></code> and <code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">build</span> <span class="pre">--upgrade</span></code></p>
<p>TODO: Add how to debug containers using <code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">run</span></code> w/ <code class="docutils literal notranslate"><span class="pre">taskiq-redis</span></code> broker</p>
</section>
<section id="adding-environment-variables">
<h2>Adding Environment Variables<a class="headerlink" href="#adding-environment-variables" title="Permalink to this heading"></a></h2>
<p>Once you have created your bot application container image, you might know of some environment variables the image requires to run properly.
Thanks to it’s flexible plugin system, ape plugins may also require specific environment variables to load as well.
Silverback Clusters include an environment variable management system for exactly this purpose,
which you can manage using <a class="reference external" href="../commands/cluster.html#silverback-cluster-vars"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">vars</span></code></a> subcommand.</p>
<p>The environment variable management system makes use of a concept called “Variable Groups” which are distinct collections of environment variables meant to be used together.
These variable groups will help in managing the runtime environment of your Applications by allowing you to segregate different variables depending on each bot’s needs.</p>
<p>To create an environment group, use the <a class="reference external" href="../commands/cluster.html#silverback-cluster-vars-new"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">vars</span> <span class="pre">new</span></code></a> command and give it a name and a set of related variables.
For instance, it may make sense to make a group of variables for your favorite Ape plugins or services, such as RPC Providers, Blockchain Data Indexers, Etherscan, etc.
You might have a database connection that you want all your bots to access.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All environment variables in Silverback Clusters are private, meaning they cannot be viewed after they are uploaded.
However, your Bots will have full access to their values from within their runtime environment, so be careful that you fully understand what you are sharing with your bots.</p>
<p>Also, understand your build dependencies within your container and make sure you are not using any vulnerable or malicious packages.</p>
<p><strong>NEVER</strong> upload your private key in a plaintext format!</p>
<p>Use <em>Ape Account Plugins</em> such as <a class="reference external" href="https://github.com/ApeWorX/ape-aws"><code class="docutils literal notranslate"><span class="pre">ape-aws</span></code></a> to safely manage access to your hosted keys.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Etherscan plugin <em>will not function</em> without an API key in the cloud environment.
This will likely create errors running your applications if you use Ape’s <code class="docutils literal notranslate"><span class="pre">Contract</span></code> class.</p>
</div>
<p>To list your Variable Groups, use <a class="reference external" href="../commands/cluster.html#silverback-cluster-vars-list"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">vars</span> <span class="pre">list</span></code></a>.
To see information about a specific Variable Group, including the Environment Variables it includes, use <a class="reference external" href="../commands/cluster.html#silverback-cluster-vars-info"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">vars</span> <span class="pre">info</span></code></a>
To remove a variable group, use <a class="reference external" href="../commands/cluster.html#silverback-cluster-vars-remove"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">vars</span> <span class="pre">remove</span></code></a>,</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can only remove a Variable Group if it is not referenced by any existing Bot.</p>
</div>
<p>Once you have created all the Variable Group(s) that you need to operate your Bot, you can reference these groups by name when adding your Bot to the cluster.</p>
</section>
<section id="deploying-your-bot">
<h2>Deploying your Bot<a class="headerlink" href="#deploying-your-bot" title="Permalink to this heading"></a></h2>
<p>You are finally ready to deploy your bot on the Cluster and get it running!</p>
<p>To deploy your Bot, use the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-new"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">new</span></code></a> command and give your bot a name,
container image, network to run on, an account alias (if you want to sign transactions w/ <code class="docutils literal notranslate"><span class="pre">app.signer</span></code>),
and any environment Variable Group(s) the bot needs.
If everything validates successfully, the Cluster will begin orchestrating your deployment for you.</p>
<p>You should monitor the deployment and startup of your bot to make sure it enters the RUNNING state successfully.
You can do this using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-health"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">health</span></code></a> command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It usually takes a minute or so for your bot to transition from PROVISIONING to STARTUP to the RUNNING state.
If there are any difficulties in downloading your container image, provisioning your desired infrastructure, or if your application encounters an error during the STARTUP phase,
the Bot will not enter into the RUNNING state and will be shut down gracefully into the STOPPED state.</p>
<p>Once in the STOPPED state, you can make any adjustments to the environment Variable Group(s) or other runtime parameters in the Bot config;
or, you can make code changes and deploy a new image for the Bot to use.
Once ready, you can use the <code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">start</span></code> command to re-start your Bot.</p>
</div>
<p>If at any time you want to view the configuration of your bot, you can do so using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-info"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">info</span></code></a> command.
You can also update metadata or configuration of your bot using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-update"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">update</span></code></a> command.
Lastly, if you want to shutdown and delete your bot, you can do so using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-remove"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">remove</span></code></a> command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Configuration updates do not redeploy your Bots automatically, you must manually stop and restart your bots for changes to take effect.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Removing a Bot will immediately trigger a SHUTDOWN if the Bot is not already STOPPED.</p>
</div>
</section>
<section id="monitoring-your-bot">
<h2>Monitoring your Bot<a class="headerlink" href="#monitoring-your-bot" title="Permalink to this heading"></a></h2>
<p>Once your bot is successfully running in the RUNNING state, you can monitor your bot with a series of commands
under the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span></code></a> subcommand group.
We already saw how you can use the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-list"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">list</span></code></a> command to see all bots managed by your Cluster (running or not).</p>
<p>To see runtime health information about a specific bot, again use the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-health"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">health</span></code></a> command.
You can view the logs that a specific bot is generating using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-logs"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">logs</span></code></a> command.
Lastly, you can view unacknowledged errors that your bot has experienced while in the RUNNING state
using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-errors"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">errors</span></code></a> command.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once in the RUNNING state, your Bot will not stop running unless it experiences a certain amount of errors in quick succession.
Any task execution that experiences an error will abort execution (and therefore not produce any metrics) but the Bot <strong>will not</strong> shutdown.</p>
<p>All errors encountered during task exeuction are reported to the Cluster for later review by any users with appriopiate access.
Tasks do not retry (by default), but updates to <code class="docutils literal notranslate"><span class="pre">app.state</span></code> are maintained up until the point an error occurs.</p>
<p>It is important to keep track of these errors and ensure that none of them are in fact critical to the operation of your Application,
and to take corrective or preventative action if it is determined that it should be treated as a more critical failure condition.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your Bots can also be monitored from the Platform UI at <a class="reference external" href="https://silverback.apeworx.io">https://silverback.apeworx.io</a>.</p>
</div>
</section>
<section id="controlling-your-bot">
<h2>Controlling your Bot<a class="headerlink" href="#controlling-your-bot" title="Permalink to this heading"></a></h2>
<p>As we already saw, once a Bot is configured in a Cluster, we can control it using commands from the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span></code></a> subcommand group.
For example, we can attempt to start a Bot that is not currently running (after making configuration or code changes)
using the <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-start"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">start</span></code></a> command.
We can also stop a bot using <a class="reference external" href="../commands/cluster.html#silverback-cluster-bots-stop"><code class="docutils literal notranslate"><span class="pre">silverback</span> <span class="pre">cluster</span> <span class="pre">bots</span> <span class="pre">stop</span></code></a> that is currently in the RUNNING state if we desire.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Controlling your bots can be done from the Platform UI at <a class="reference external" href="https://silverback.apeworx.io">https://silverback.apeworx.io</a>, if you have the right permissions to do so.</p>
</div>
<p>TODO: Updating runtime parameters</p>
</section>
<section id="viewing-measured-metrics">
<h2>Viewing Measured Metrics<a class="headerlink" href="#viewing-measured-metrics" title="Permalink to this heading"></a></h2>
<p>TODO: Downloading metrics from your Bot</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="development.html" class="btn btn-neutral float-left" title="Developing Applications" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../commands/run.html" class="btn btn-neutral float-right" title="Local Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ApeWorX LTD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>